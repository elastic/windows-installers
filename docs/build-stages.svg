<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1185px" preserveAspectRatio="none" style="width:1157px;height:1185px;" version="1.1" viewBox="0 0 1157 1185" width="1157px" zoomAndPan="magnify"><defs><filter height="300%" id="f17hem2b4tsfjz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><path d="M190.75,10 L190.75,36.3516 A0,0 0 0 0 190.75,36.3516 L490.75,36.3516 A0,0 0 0 0 490.75,36.3516 L490.75,28 L510.75,23.1758 L490.75,20 L490.75,20 L480.75,10 L190.75,10 A0,0 0 0 0 190.75,10 " fill="#FBFB77" filter="url(#f17hem2b4tsfjz)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M480.75,10 L480.75,20 L490.75,20 L480.75,10 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="279" x="196.75" y="28.4951">Run "build.bat help" to see all of the possibilities</text><ellipse cx="520.75" cy="23.1758" fill="#000000" filter="url(#f17hem2b4tsfjz)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FFFFFF" filter="url(#f17hem2b4tsfjz)" height="1085.1416" style="stroke: #000000; stroke-width: 2.0;" width="1136.25" x="10" y="46.9277"/><path d="M74,47.9277 L74,57.5371 L64,67.5371 L10,67.5371 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="13" y="62.4609">build.bat</text><path d="M639.25,88.9082 L639.25,98.084 L619.25,102.084 L639.25,106.084 L639.25,115.2598 A0,0 0 0 0 639.25,115.2598 L979.25,115.2598 A0,0 0 0 0 979.25,115.2598 L979.25,98.9082 L969.25,88.9082 L639.25,88.9082 A0,0 0 0 0 639.25,88.9082 " fill="#FBFB77" filter="url(#f17hem2b4tsfjz)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M969.25,88.9082 L969.25,98.9082 L979.25,98.9082 L969.25,88.9082 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="319" x="645.25" y="107.4033">./build/scripts/Commandline.fsx: module CommandLine</text><rect fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="197" x="422.25" y="84.5371"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="177" x="432.25" y="106.9941">parse command line arguments</text><rect fill="#FFFFFF" filter="url(#f17hem2b4tsfjz)" height="369.0781" style="stroke: #000000; stroke-width: 2.0;" width="1023.75" x="20" y="130.207"/><path d="M141,131.207 L141,140.8164 L131,150.8164 L20,150.8164 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="23" y="145.7402">compilation-stage</text><polygon fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" points="405.25,167.8164,636.25,167.8164,648.25,179.8164,636.25,191.8164,405.25,191.8164,393.25,179.8164,405.25,167.8164" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="231" x="405.25" y="184.3174">has developer has specified a product version?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="372.25" y="177.3994">YES</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="15" x="648.25" y="177.3994">NO</text><path d="M410,206.1875 L410,215.3633 L390,219.3633 L410,223.3633 L410,232.5391 A0,0 0 0 0 410,232.5391 L701,232.5391 A0,0 0 0 0 701,232.5391 L701,216.1875 L691,206.1875 L410,206.1875 A0,0 0 0 0 410,206.1875 " fill="#FBFB77" filter="url(#f17hem2b4tsfjz)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M691,206.1875 L691,216.1875 L701,216.1875 L691,206.1875 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="416" y="224.6826">./build/scripts/Feeds.fsx: module ArtifactsFeed</text><rect fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="350" x="40" y="201.8164"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="330" x="50" y="224.2734">query https://artifacts-api.elastic.co/v1 to determine existence</text><rect fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="290" x="70" y="256.9102"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="270" x="80" y="279.3672">download and extract specified artifact to ./build/in</text><rect fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="211" x="721" y="201.8164"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="191" x="731" y="224.2734">use single zip file found in ./build/in</text><polygon fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" points="520.75,298.0039,532.75,310.0039,520.75,322.0039,508.75,310.0039,520.75,298.0039" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M725.75,346.375 L725.75,355.5508 L705.75,359.5508 L725.75,363.5508 L725.75,372.7266 A0,0 0 0 0 725.75,372.7266 L1033.75,372.7266 A0,0 0 0 0 1033.75,372.7266 L1033.75,356.375 L1023.75,346.375 L725.75,346.375 A0,0 0 0 0 725.75,346.375 " fill="#FBFB77" filter="url(#f17hem2b4tsfjz)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1023.75,346.375 L1023.75,356.375 L1033.75,356.375 L1023.75,346.375 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="287" x="731.75" y="364.8701">./build/scripts/BuildConfig.fsx: module BuildConfig</text><rect fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="370" x="335.75" y="342.0039"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="350" x="345.75" y="364.4609">generate ./src/Installer/Elastic.Installer.Domain/ProductGuids.cs</text><rect fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="197" x="422.25" y="397.0977"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="177" x="432.25" y="419.5547">compile ./src/Elastic.Installer.sln</text><rect fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="463.25" y="452.1914"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="473.25" y="474.6484">execute test suite</text><rect fill="#FFFFFF" filter="url(#f17hem2b4tsfjz)" height="211.8516" style="stroke: #000000; stroke-width: 2.0;" width="511" x="385.25" y="509.8613"/><path d="M546.25,510.8613 L546.25,520.4707 L536.25,530.4707 L385.25,530.4707 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="388.25" y="525.3945">generate-installer-stage</text><path d="M663.25,540.4707 L663.25,565.998 L643.25,569.998 L663.25,573.998 L663.25,599.5254 A0,0 0 0 0 663.25,599.5254 L854.25,599.5254 A0,0 0 0 0 854.25,599.5254 L854.25,550.4707 L844.25,540.4707 L663.25,540.4707 A0,0 0 0 0 663.25,540.4707 " fill="#FBFB77" filter="url(#f17hem2b4tsfjz)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M844.25,540.4707 L844.25,550.4707 L854.25,550.4707 L844.25,540.4707 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="669.25" y="558.9658">var productName = args[0];</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="669.25" y="575.3174">var version = args[1];</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="669.25" y="591.6689">var distributionRoot = args[2];</text><rect fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="245" x="398.25" y="552.4512"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="225" x="408.25" y="574.9082">invoke Elastic.Installer.Msi.exe with args[]</text><path d="M666.25,623.8965 L666.25,633.0723 L646.25,637.0723 L666.25,641.0723 L666.25,650.248 A0,0 0 0 0 666.25,650.248 L886.25,650.248 A0,0 0 0 0 886.25,650.248 L886.25,633.8965 L876.25,623.8965 L666.25,623.8965 A0,0 0 0 0 666.25,623.8965 " fill="#FBFB77" filter="url(#f17hem2b4tsfjz)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M876.25,623.8965 L876.25,633.8965 L886.25,633.8965 L876.25,623.8965 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="672.25" y="642.3916">DirFiles(distributionRoot + @"\*.*")</text><rect fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="251" x="395.25" y="619.5254"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="231" x="405.25" y="641.9824">generate windows installer xml for product</text><rect fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="232" x="404.75" y="674.6191"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="212" x="414.75" y="697.0762">compile windows installer xml into msi</text><rect fill="#FFFFFF" filter="url(#f17hem2b4tsfjz)" height="177.6211" style="stroke: #000000; stroke-width: 2.0;" width="329" x="366.75" y="732.2891"/><path d="M501.75,733.2891 L501.75,742.8984 L491.75,752.8984 L366.75,752.8984 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="369.75" y="747.8223">code-signing-phase</text><rect fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="473.75" y="818.8164"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="483.75" y="841.2734">sign the build</text><polygon fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" points="388.75,769.8984,652.75,769.8984,664.75,781.8984,652.75,793.8984,388.75,793.8984,376.75,781.8984,388.75,769.8984" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="524.75" y="805.3174">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="264" x="388.75" y="786.3994">did the command line arguments request code signing?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="12" x="664.75" y="779.4814">no</text><polygon fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" points="520.75,873.9102,532.75,885.9102,520.75,897.9102,508.75,885.9102,520.75,873.9102" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f17hem2b4tsfjz)" height="199.583" style="stroke: #000000; stroke-width: 2.0;" width="765.5" x="370.75" y="920.4863"/><path d="M492.75,921.4863 L492.75,931.0957 L482.75,941.0957 L370.75,941.0957 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="373.75" y="936.0195">vertification-stage</text><path d="M632.25,1005.0146 L632.25,1030.542 L612.25,1034.542 L632.25,1038.542 L632.25,1064.0693 A0,0 0 0 0 632.25,1064.0693 L1110.25,1064.0693 A0,0 0 0 0 1110.25,1064.0693 L1110.25,1015.0146 L1100.25,1005.0146 L632.25,1005.0146 A0,0 0 0 0 632.25,1005.0146 " fill="#FBFB77" filter="url(#f17hem2b4tsfjz)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1100.25,1005.0146 L1100.25,1015.0146 L1110.25,1015.0146 L1100.25,1005.0146 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="638.25" y="1023.5098">option: use virtualbox on the local machine</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="406" x="638.25" y="1039.8613">option: provision a machine on Azure for each integration test scenario</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="457" x="638.25" y="1056.2129">option: provision a single machine on Azure on which to run all integration tests</text><rect fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="183" x="429.25" y="1016.9951"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="163" x="439.25" y="1039.4521">execute the installer and verify</text><polygon fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" points="392.75,958.0957,648.75,958.0957,660.75,970.0957,648.75,982.0957,392.75,982.0957,380.75,970.0957,392.75,958.0957" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="524.75" y="993.5146">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="256" x="392.75" y="974.5967">did the command line arguments request verification?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="12" x="660.75" y="967.6787">no</text><polygon fill="#FEFECE" filter="url(#f17hem2b4tsfjz)" points="520.75,1084.0693,532.75,1096.0693,520.75,1108.0693,508.75,1096.0693,520.75,1084.0693" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="520.75" cy="1163.0693" fill="#FFFFFF" filter="url(#f17hem2b4tsfjz)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="520.75" cy="1163.0693" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="215" x2="215" y1="236.9102" y2="256.9102"/><polygon fill="#A80036" points="211,246.9102,215,256.9102,219,246.9102,215,250.9102" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="393.25" x2="215" y1="179.8164" y2="179.8164"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="215" x2="215" y1="179.8164" y2="201.8164"/><polygon fill="#A80036" points="211,191.8164,215,201.8164,219,191.8164,215,195.8164" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="648.25" x2="826.5" y1="179.8164" y2="179.8164"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="826.5" x2="826.5" y1="179.8164" y2="201.8164"/><polygon fill="#A80036" points="822.5,191.8164,826.5,201.8164,830.5,191.8164,826.5,195.8164" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="215" x2="215" y1="292.0039" y2="310.0039"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="215" x2="508.75" y1="310.0039" y2="310.0039"/><polygon fill="#A80036" points="498.75,306.0039,508.75,310.0039,498.75,314.0039,502.75,310.0039" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="826.5" x2="826.5" y1="236.9102" y2="310.0039"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="826.5" x2="532.75" y1="310.0039" y2="310.0039"/><polygon fill="#A80036" points="542.75,306.0039,532.75,310.0039,542.75,314.0039,538.75,310.0039" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="322.0039" y2="342.0039"/><polygon fill="#A80036" points="516.75,332.0039,520.75,342.0039,524.75,332.0039,520.75,336.0039" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="377.0977" y2="397.0977"/><polygon fill="#A80036" points="516.75,387.0977,520.75,397.0977,524.75,387.0977,520.75,391.0977" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="432.1914" y2="452.1914"/><polygon fill="#A80036" points="516.75,442.1914,520.75,452.1914,524.75,442.1914,520.75,446.1914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="119.6309" y2="167.8164"/><polygon fill="#A80036" points="516.75,157.8164,520.75,167.8164,524.75,157.8164,520.75,161.8164" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="587.5449" y2="619.5254"/><polygon fill="#A80036" points="516.75,609.5254,520.75,619.5254,524.75,609.5254,520.75,613.5254" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="654.6191" y2="674.6191"/><polygon fill="#A80036" points="516.75,664.6191,520.75,674.6191,524.75,664.6191,520.75,668.6191" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="487.2852" y2="552.4512"/><polygon fill="#A80036" points="516.75,542.4512,520.75,552.4512,524.75,542.4512,520.75,546.4512" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="793.8984" y2="818.8164"/><polygon fill="#A80036" points="516.75,808.8164,520.75,818.8164,524.75,808.8164,520.75,812.8164" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="664.75" x2="676.75" y1="781.8984" y2="781.8984"/><polygon fill="#A80036" points="672.75,826.3633,676.75,836.3633,680.75,826.3633,676.75,830.3633" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="676.75" x2="676.75" y1="781.8984" y2="885.9102"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="676.75" x2="532.75" y1="885.9102" y2="885.9102"/><polygon fill="#A80036" points="542.75,881.9102,532.75,885.9102,542.75,889.9102,538.75,885.9102" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="853.9102" y2="873.9102"/><polygon fill="#A80036" points="516.75,863.9102,520.75,873.9102,524.75,863.9102,520.75,867.9102" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="709.7129" y2="769.8984"/><polygon fill="#A80036" points="516.75,759.8984,520.75,769.8984,524.75,759.8984,520.75,763.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="982.0957" y2="1016.9951"/><polygon fill="#A80036" points="516.75,1006.9951,520.75,1016.9951,524.75,1006.9951,520.75,1010.9951" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="660.75" x2="1120.25" y1="970.0957" y2="970.0957"/><polygon fill="#A80036" points="1116.25,1024.542,1120.25,1034.542,1124.25,1024.542,1120.25,1028.542" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1120.25" x2="1120.25" y1="970.0957" y2="1096.0693"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1120.25" x2="532.75" y1="1096.0693" y2="1096.0693"/><polygon fill="#A80036" points="542.75,1092.0693,532.75,1096.0693,542.75,1100.0693,538.75,1096.0693" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="1052.0889" y2="1084.0693"/><polygon fill="#A80036" points="516.75,1074.0693,520.75,1084.0693,524.75,1074.0693,520.75,1078.0693" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="897.9102" y2="958.0957"/><polygon fill="#A80036" points="516.75,948.0957,520.75,958.0957,524.75,948.0957,520.75,952.0957" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="33.1758" y2="84.5371"/><polygon fill="#A80036" points="516.75,74.5371,520.75,84.5371,524.75,74.5371,520.75,78.5371" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520.75" x2="520.75" y1="1108.0693" y2="1152.0693"/><polygon fill="#A80036" points="516.75,1142.0693,520.75,1152.0693,524.75,1142.0693,520.75,1146.0693" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
start
note left
	Run "build.bat help" to see all of the possibilities
end note
partition build.bat {
	:parse command line arguments;
	note right
		./build/scripts/Commandline.fsx: module CommandLine
	end note

	partition compilation-stage {
		if (has developer has specified a product version?) then
		-> YES;
			:query https://artifacts-api.elastic.co/v1 to determine existence;
			note right
				./build/scripts/Feeds.fsx: module ArtifactsFeed
			end note
			:download and extract specified artifact to ./build/in;
		else
		-> NO;
			:use single zip file found in ./build/in;
		endif
		:generate ./src/Installer/Elastic.Installer.Domain/ProductGuids.cs;
		note right
			./build/scripts/BuildConfig.fsx: module BuildConfig
		end note
		:compile ./src/Elastic.Installer.sln;
		:execute test suite;
	}

	partition generate-installer-stage {
		:invoke Elastic.Installer.Msi.exe with args[];
		note right
			var productName = args[0];
			var version = args[1];
			var distributionRoot = args[2];
		end note
		:generate windows installer xml for product;
		note right
			DirFiles(distributionRoot + @"\*.*")
		end note
		:compile windows installer xml into msi;
	}
	partition code-signing-phase {
		if (did the command line arguments request code signing?) then (yes)
			:sign the build;
		else (no)
		endif
	}
	partition vertification-stage {
		if (did the command line arguments request verification?) then (yes)
			:execute the installer and verify;
			note right
			option: use virtualbox on the local machine
			option: provision a machine on Azure for each integration test scenario
			option: provision a single machine on Azure on which to run all integration tests
			end note
		else (no)
		endif



	}
}

stop
@enduml

PlantUML version 1.2019.03(Sun Mar 10 22:04:44 AEDT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_201-b09
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: en
Country: AU
--></g></svg>